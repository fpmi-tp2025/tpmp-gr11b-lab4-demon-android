# Описание

Консольное приложение на языке C, реализующее систему управления базой данных парфюмерного рынка. Позволяет управлять сущностями (маклеры, товары, поставщики, покупатели, сделки) и получать отчеты с использованием SQLite.

## Реализованные Требования

* **База данных (п.1):** Созданы таблицы для маклеров, товаров, сделок, поставщиков, покупателей и статистики маклеров с учетом ограничений целостности (`database_schema.sql`).
* **Роли и Доступ:** Реализовано разделение на Администратора (полный доступ) и Маклера (доступ к своим сделкам и некоторым отчетам).
* **Отчеты SELECT (п.2):**
  * Сведения о продажах (количество, стоимость) по товарам за период.
  * Перечень фирм-покупателей по товарам (количество, стоимость).
  * Информация по самому популярному типу товара (*доступно маклеру*).
  * Сведения о маклере с максимальным количеством сделок и его поставщиках.
  * Список маклеров по фирмам-поставщикам (количество, стоимость).
* **Управление данными CRUD (п.3):** Реализованы операции добавления, обновления и удаления данных для основных таблиц (через меню администратора).
* **Статистика маклеров (п.4 *):** Создана таблица `BrokerStats` и функция для пакетного обновления статистики маклеров по количеству и сумме сделок (`recalculate_broker_stats`).
* **Обновление остатков и сделок (п.5):** Реализована функция `update_goods_quantity_and_clear_deals` для обновления количества товаров и удаления сделок до указанной даты.
* **Просмотр сделок на дату (п.6 *):** Реализована функция `show_deals_on_date`. Маклеры также могут просматривать все *свои* сделки (`show_broker_deals`).

## Сборка

1. Создайте директорию для сборки:

    ```bash
    mkdir build
    cd build
    ```

2. Запустите CMake:

    ```bash
    cmake ..
    ```

3. Соберите проект:

    ```bash
    make
    ```

    Исполняемый файл будет находиться в `build/bin/PerfumeBazaar`.

## Запуск

1. Перейдите в директорию с исполняемым файлом:

    ```bash
    cd bin
    ```

    (Или просто запустите `./build/bin/PerfumeBazaar` из корневой директории проекта после сборки).
2. Запустите приложение:

    ```bash
    ./PerfumeBazaar
    ```

3. При первом запуске будет создана база данных `ParfumeMarket.db` и заполненена начальными данными (если файлы `database_schema.sql` и `seed_data.sql` находятся рядом).
4. **Вход в систему:**
    * **Администратор:**
        * Имя пользователя: `admin`
        * Пароль: `password123`
    * **Маклер (пример):**
        * Имя пользователя: `broker_petrov`
        * Пароль: `petrovpass`
    * **Маклер (пример):**
        * Имя пользователя: `broker_sidorov`
        * Пароль: `sidorovpass`

## База данных

* Файл БД: `ParfumeMarket.db` (создается рядом с исполняемым файлом).
* Схема: `docs/database_schema.sql`
* Начальные данные: `docs/seed_data.sql`

## Авторы (11 группа)

* Дрожжа Кирилл Витальевич
* Минчук Станислав Валерьевич
